<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>Hello, Lisp</title><link rel="stylesheet" href="/styles.css"/></head><body><table width="100%" cellpadding="0" cellspacing="0" border="0" id="header"><td align="left"><b>Hello, Lisp</b> | <a href=../>Go back</a></td><td align="right">Written by <a href="https://github.com/knarkzel">Knarkzel</a></td></table><p>
To get started, lets create a new project named lisp:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-tree-sitter-hl-faceXpunctuationXspecial">$</span> <span class="org-tree-sitter-hl-faceXproperty">cargo</span> new lisp
     <span class="org-tree-sitter-hl-faceXfunctionXcall">Created</span> binary <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">application</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-tree-sitter-hl-faceXpunctuationXspecial">`</span><span class="org-tree-sitter-hl-faceXembedded"><span class="org-tree-sitter-hl-faceXfunctionXcall">lisp</span></span><span class="org-tree-sitter-hl-faceXpunctuationXspecial">`</span> package
<span class="org-tree-sitter-hl-faceXpunctuationXspecial">$</span> <span class="org-tree-sitter-hl-faceXproperty">cd</span> lisp
<span class="org-tree-sitter-hl-faceXpunctuationXspecial">$</span> <span class="org-tree-sitter-hl-faceXproperty">cargo</span> add nom anyhow
    <span class="org-tree-sitter-hl-faceXfunctionXcall">Updating</span> crates.io index
      <span class="org-tree-sitter-hl-faceXfunctionXcall">Adding</span> nom v7.1.2 to dependencies.
             <span class="org-tree-sitter-hl-faceXfunctionXcall">Features:</span>
             <span class="org-tree-sitter-hl-faceXfunctionXcall">+</span> alloc
             <span class="org-tree-sitter-hl-faceXfunctionXcall">+</span> std
             <span class="org-tree-sitter-hl-faceXfunctionXcall">-</span> docsrs
      <span class="org-tree-sitter-hl-faceXfunctionXcall">Adding</span> anyhow v1.0.68 to dependencies.
             <span class="org-tree-sitter-hl-faceXfunctionXcall">Features:</span>
             <span class="org-tree-sitter-hl-faceXfunctionXcall">+</span> std
             <span class="org-tree-sitter-hl-faceXfunctionXcall">-</span> backtrace
</pre>
</div>

<div id="outline-container-org1b5e6ca" class="outline-2">
<h2 id="org1b5e6ca">Final code</h2>
<div class="outline-text-2" id="text-org1b5e6ca">
<div class="org-src-container">
<pre class="src src-rust"><span class="org-tree-sitter-hl-faceXkeyword">use</span> <span class="org-tree-sitter-hl-faceXconstant">std</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstant">fmt</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Display</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>

<span class="org-tree-sitter-hl-faceXkeyword">use</span> <span class="org-tree-sitter-hl-faceXconstant">anyhow</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-rainbow-delimiters-depth-1">{</span>anyhow, <span class="org-tree-sitter-hl-faceXconstructor">Result</span><span class="org-rainbow-delimiters-depth-1">}</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
<span class="org-tree-sitter-hl-faceXkeyword">use</span> <span class="org-tree-sitter-hl-faceXconstant">nom</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXconstant">branch</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>alt,
    <span class="org-tree-sitter-hl-faceXconstant">bytes</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstant">complete</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>tag,
    <span class="org-tree-sitter-hl-faceXconstant">character</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstant">complete</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-rainbow-delimiters-depth-2">{</span>digit1, multispace0<span class="org-rainbow-delimiters-depth-2">}</span>,
    <span class="org-tree-sitter-hl-faceXconstant">combinator</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>map,
    <span class="org-tree-sitter-hl-faceXconstant">multi</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>many1,
    <span class="org-tree-sitter-hl-faceXconstant">sequence</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>delimited,
    <span class="org-tree-sitter-hl-faceXconstructor">IResult</span>,
<span class="org-rainbow-delimiters-depth-1">}</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
<span class="org-tree-sitter-hl-faceXkeyword">use</span> <span class="org-tree-sitter-hl-faceXconstant">rustyline</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-rainbow-delimiters-depth-1">{</span><span class="org-tree-sitter-hl-faceXconstant">error</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">ReadlineError</span>, <span class="org-tree-sitter-hl-faceXconstructor">Editor</span><span class="org-rainbow-delimiters-depth-1">}</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>

<span class="org-tree-sitter-hl-faceXcomment">// Parser</span>
<span class="org-tree-sitter-hl-faceXattribute">#</span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">[</span></span></span><span class="org-tree-sitter-hl-faceXattribute">derive</span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXconstructor">Debug</span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">]</span></span></span>
<span class="org-tree-sitter-hl-faceXkeyword">enum</span> <span class="org-tree-sitter-hl-faceXtype">Operator</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXconstructor">Plus</span>,
    <span class="org-tree-sitter-hl-faceXconstructor">Minus</span>,
    <span class="org-tree-sitter-hl-faceXconstructor">Divide</span>,
    <span class="org-tree-sitter-hl-faceXconstructor">Multiply</span>,
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">impl</span> <span class="org-tree-sitter-hl-faceXtype">Display</span> <span class="org-tree-sitter-hl-faceXkeyword">for</span> <span class="org-tree-sitter-hl-faceXtype">Operator</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction"><span class="org-tree-sitter-hl-faceXmethod">fmt</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXkeyword">self</span>, <span class="org-tree-sitter-hl-faceXvariableXparameter">f</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXkeyword">mut</span> <span class="org-tree-sitter-hl-faceXconstant">std</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>fmt<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXtype">Formatter</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">'</span><span class="org-tree-sitter-hl-faceXlabel"><span class="org-tree-sitter-hl-faceXconstant">_</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXconstant">std</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>fmt<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXtype">Result</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-tree-sitter-hl-faceXkeyword">match</span> <span class="org-tree-sitter-hl-faceXkeyword">self</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Plus</span> =&gt; f<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">write_str</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXstring">"+"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Minus</span> =&gt; f<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">write_str</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXstring">"-"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Divide</span> =&gt; f<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">write_str</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXstring">"/"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Multiply</span> =&gt; f<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">write_str</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXstring">"*"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXattribute">#</span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">[</span></span></span><span class="org-tree-sitter-hl-faceXattribute">derive</span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXconstructor">Debug</span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span></span><span class="org-tree-sitter-hl-faceXattribute"><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">]</span></span></span>
<span class="org-tree-sitter-hl-faceXkeyword">enum</span> <span class="org-tree-sitter-hl-faceXtype">Atom</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXconstructor">Number</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">isize</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>,
    <span class="org-tree-sitter-hl-faceXconstructor">Operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXtype">Operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>,
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">impl</span> <span class="org-tree-sitter-hl-faceXtype">Display</span> <span class="org-tree-sitter-hl-faceXkeyword">for</span> <span class="org-tree-sitter-hl-faceXtype">Atom</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction"><span class="org-tree-sitter-hl-faceXmethod">fmt</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXkeyword">self</span>, <span class="org-tree-sitter-hl-faceXvariableXparameter">f</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXkeyword">mut</span> <span class="org-tree-sitter-hl-faceXconstant">std</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>fmt<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXtype">Formatter</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">'</span><span class="org-tree-sitter-hl-faceXlabel"><span class="org-tree-sitter-hl-faceXconstant">_</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXconstant">std</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span>fmt<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXtype">Result</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-tree-sitter-hl-faceXkeyword">match</span> <span class="org-tree-sitter-hl-faceXkeyword">self</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Number</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>number<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; number<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">fmt</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>f<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>operator<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; operator<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">fmt</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>f<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">input</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">IResult</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span>, <span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">Atom</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">plus</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"+"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, |_| <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Plus</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">minus</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"-"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, |_| <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Minus</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">divide</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"/"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, |_| <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Divide</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">multiply</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"*"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, |_| <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Multiply</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">alt</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>plus, minus, divide, multiply<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)(</span></span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">number</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">input</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">IResult</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span>, <span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">Atom</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall">map</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span>digit1, |<span class="org-tree-sitter-hl-faceXvariableXparameter">digits</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span>| <span class="org-rainbow-delimiters-depth-3">{</span>
        <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Number</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>digits<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">parse</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">&lt;</span></span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">isize</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">&gt;()</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">unwrap</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">()</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>
    <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)(</span></span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">atom</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">input</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">IResult</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span>, <span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">Atom</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">options</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">alt</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span>operator, number<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall">delimited</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span>multispace0, options, multispace0<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)(</span></span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">parse</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">input</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">IResult</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">str</span>, <span class="org-tree-sitter-hl-faceXtype">Vec</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">Atom</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall">delimited</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"("</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, <span class="org-tree-sitter-hl-faceXfunctionXcall">many1</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span>atom<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>, <span class="org-tree-sitter-hl-faceXfunctionXcall">tag</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">")"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)(</span></span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXcomment">// Helpers</span>
<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">atoms_to_numbers</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">atoms</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">[</span></span><span class="org-tree-sitter-hl-faceXtype">Atom</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">]</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">Result</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype">Vec</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&lt;</span></span><span class="org-tree-sitter-hl-faceXtypeXbuiltin">isize</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">numbers</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> atoms
        <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">iter</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">()</span></span>
        <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">map</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span>|atom| <span class="org-tree-sitter-hl-faceXkeyword">match</span> atom <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Number</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>number<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Ok</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXoperator">*</span>number<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
            atom =&gt; <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Err</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXmacro">anyhow!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-tree-sitter-hl-faceXstring">"Expected number, got {atom:?}"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>,
        <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
        <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">collect</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype">Result</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype">Vec</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">_</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">&gt;</span></span>, <span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">_</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&gt;()</span></span><span class="org-tree-sitter-hl-faceXoperator">?</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Ok</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span>numbers<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXcomment">// Evaluator</span>
<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">eval</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tree-sitter-hl-faceXvariableXparameter">atoms</span>: <span class="org-tree-sitter-hl-faceXoperator">&amp;</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">[</span></span><span class="org-tree-sitter-hl-faceXtype">Atom</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">]</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">)</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">Result</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXtype"><span class="org-tree-sitter-hl-faceXtypeXargument">Atom</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">match</span> atoms <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">[</span></span><span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Operator</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>operator<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>, tail @ ..<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">]</span></span> =&gt; <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">numbers</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">atoms_to_numbers</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>tail<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-tree-sitter-hl-faceXoperator">?</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
            <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">total</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> numbers
                <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">into_iter</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">()</span></span>
                <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">reduce</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>|total, number| <span class="org-tree-sitter-hl-faceXkeyword">match</span> operator <span class="org-rainbow-delimiters-depth-5">{</span>
                    <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Plus</span> =&gt; total <span class="org-tree-sitter-hl-faceXoperator">+</span> number,
                    <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Minus</span> =&gt; total <span class="org-tree-sitter-hl-faceXoperator">-</span> number,
                    <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Divide</span> =&gt; total <span class="org-tree-sitter-hl-faceXoperator">/</span> number,
                    <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Operator</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Multiply</span> =&gt; total <span class="org-tree-sitter-hl-faceXoperator">*</span> number,
                <span class="org-rainbow-delimiters-depth-5">}</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>
                <span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">ok_or_else</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>|| <span class="org-tree-sitter-hl-faceXfunctionXmacro">anyhow!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-tree-sitter-hl-faceXstring">"Tail is empty"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-tree-sitter-hl-faceXoperator">?</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
            <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Ok</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">Atom</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Number</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span>total<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span>
        <span class="org-rainbow-delimiters-depth-3">}</span>
        atoms =&gt; <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Err</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXfunctionXmacro">anyhow!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXstring">"Invalid input: {atoms:#?}"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span>,
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-tree-sitter-hl-faceXkeyword">fn</span> <span class="org-tree-sitter-hl-faceXfunction">main</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">()</span></span> -&gt; <span class="org-tree-sitter-hl-faceXtype">Result</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXkeyword">mut</span> <span class="org-tree-sitter-hl-faceXvariable">editor</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXtype">Editor</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&lt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">()</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">&gt;</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXfunctionXcall">new</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-tree-sitter-hl-faceXoperator">?</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
    <span class="org-tree-sitter-hl-faceXkeyword">loop</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-tree-sitter-hl-faceXkeyword">match</span> editor<span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">.</span><span class="org-tree-sitter-hl-faceXproperty"><span class="org-tree-sitter-hl-faceXmethodXcall">readline</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">(</span></span><span class="org-tree-sitter-hl-faceXstring">"&gt;&gt; "</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">)</span></span> <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-tree-sitter-hl-faceXconstructor">Ok</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; <span class="org-tree-sitter-hl-faceXkeyword">match</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">parse</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span>input<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> <span class="org-rainbow-delimiters-depth-4">{</span>
                <span class="org-tree-sitter-hl-faceXconstructor">Ok</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">(</span></span>_, atoms<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span> =&gt; <span class="org-rainbow-delimiters-depth-5">{</span>
                    <span class="org-tree-sitter-hl-faceXkeyword">let</span> <span class="org-tree-sitter-hl-faceXvariable">output</span> <span class="org-tree-sitter-hl-faceXoperator">=</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">eval</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-tree-sitter-hl-faceXoperator">&amp;</span>atoms<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-tree-sitter-hl-faceXoperator">?</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
                    <span class="org-tree-sitter-hl-faceXfunctionXmacro">println!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">(</span></span><span class="org-tree-sitter-hl-faceXstring">"{output}"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-6">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
                <span class="org-rainbow-delimiters-depth-5">}</span>
                <span class="org-tree-sitter-hl-faceXconstructor">Err</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span>error<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span> =&gt; <span class="org-tree-sitter-hl-faceXfunctionXmacro">println!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-tree-sitter-hl-faceXstring">"{error}"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span>,
            <span class="org-rainbow-delimiters-depth-4">}</span>,
            <span class="org-tree-sitter-hl-faceXconstructor">Err</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span><span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">ReadlineError</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Interrupted</span> | <span class="org-tree-sitter-hl-faceXconstant"><span class="org-tree-sitter-hl-faceXconstructor"><span class="org-tree-sitter-hl-faceXtype">ReadlineError</span></span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">::</span><span class="org-tree-sitter-hl-faceXconstructor">Eof</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; <span class="org-tree-sitter-hl-faceXkeyword">break</span>,
            <span class="org-tree-sitter-hl-faceXconstructor">Err</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">(</span></span>error<span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-4">)</span></span> =&gt; <span class="org-rainbow-delimiters-depth-4">{</span>
                <span class="org-tree-sitter-hl-faceXfunctionXmacro">println!</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">(</span></span><span class="org-tree-sitter-hl-faceXstring">"Error: {error}"</span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-5">)</span></span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
                <span class="org-tree-sitter-hl-faceXkeyword">break</span><span class="org-tree-sitter-hl-faceXpunctuationXdelimiter">;</span>
            <span class="org-rainbow-delimiters-depth-4">}</span>
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-tree-sitter-hl-faceXfunctionXcall"><span class="org-tree-sitter-hl-faceXconstructor">Ok</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-3">()</span></span><span class="org-tree-sitter-hl-faceXpunctuationXbracket"><span class="org-rainbow-delimiters-depth-2">)</span></span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbda6350" class="outline-2">
<h2 id="orgbda6350">Result</h2>
<div class="outline-text-2" id="text-orgbda6350">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-tree-sitter-hl-faceXfunctionXcall">lisp</span> &#10095; cargo run
    <span class="org-tree-sitter-hl-faceXfunctionXcall">Finished</span> dev <span class="org-rainbow-delimiters-depth-1">[</span>unoptimized + debuginfo<span class="org-rainbow-delimiters-depth-1">]</span> target<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">s</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-tree-sitter-hl-faceXkeyword">in</span> <span class="org-tree-sitter-hl-faceXfunctionXcall">0.02s</span>
     <span class="org-tree-sitter-hl-faceXfunctionXcall">Running</span> <span class="org-tree-sitter-hl-faceXpunctuationXspecial">`</span><span class="org-tree-sitter-hl-faceXembedded"><span class="org-tree-sitter-hl-faceXfunctionXcall">target/debug/lisp</span></span><span class="org-tree-sitter-hl-faceXpunctuationXspecial">`</span>
<span class="org-tree-sitter-hl-faceXoperator">&gt;&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">+</span> 1 2 3 4 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-tree-sitter-hl-faceXfunctionXcall">15</span>
<span class="org-tree-sitter-hl-faceXoperator">&gt;&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">*</span> 2 4 6 8<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-tree-sitter-hl-faceXfunctionXcall">384</span>
<span class="org-tree-sitter-hl-faceXoperator">&gt;&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">/</span> 100 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-tree-sitter-hl-faceXfunctionXcall">4</span>
<span class="org-tree-sitter-hl-faceXoperator">&gt;&gt;</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-tree-sitter-hl-faceXfunctionXcall">-</span> 10 5 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-tree-sitter-hl-faceXfunctionXcall">2</span>
</pre>
</div>

<pre>
lisp
 src
    <a href="./lisp/src/main.rs">main.rs</a>
 <a href="./lisp/Cargo.lock">Cargo.lock</a>
 <a href="./lisp/Cargo.toml">Cargo.toml</a>
</pre>
</div>
</div>
</body></html>
